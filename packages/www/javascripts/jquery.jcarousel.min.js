/***************************************************************************
 *	                VIRTUAL REALITY PUBLIC SOURCE LICENSE
 * 
 * Date				: Sun January 1, 2006
 * Copywrite		: (c) 2006-2014 by Syndarveruleiki,Ehf. All Rights Reserved.  Universal Wide.
 * Website			: http://www.syndarveruleiki.is
 *
 * Product Name		: Virtual Reality
 * Product Version	: 0.3.0
 *
 *	Please read this License carefully before downloading this software.By
 *	downloading or using this software, you are agreeing to be bound by the terms
 *	of this License.  If you do not or cannot agree to the terms of this License,
 *	please do not download or use the software.
 *
 *	1. General; Definitions.  This License applies to any program or other work
 *	which Virtual Reality Enterprises, Hf. ("Virtual Reality") makes publicly
 *	available and which contains a notice placed by Virtual Reality identifying
 *	such program or work as "Original Code" and stating that it is subject to the
 *	terms of this Virtual Reality Public Source License version 2.0 ("License").
 *	As used in this License:
 *
 *	1.1 "Applicable Patent Rights" mean: (a) in the case where Virtual Reality
 *	is the granter of rights, (i) claims of patents that are now or hereafter
 *	acquired, owned by or assigned to Virtual Reality and (ii) that cover subject
 *	matter contained in the Original Code, but only to the extent necessary to
 *	use, reproduce and/or distribute the Original Code	without infringement; and
 *	(b) in the case where You are the granter of rights, (i) claims of patents
 *	that are now or hereafter acquired,owned by or assigned to You and (ii) that
 *	cover subject matter in Your Modifications, taken alone or in combination
 *	with Original Code.
 *
 *	1.2 "Contributor" means any person or entity that creates or contributes to
 *	the creation of Modifications.
 *
 *	1.3 "Covered Code" means the Original Code, Modifications, the combination of
 *	Original Code and any Modifications, and/or any	respective portions thereof.
 *
 *	1.4 "Externally Deploy" means: (a) to sublicense, distribute or otherwise
 *	make Covered Code available, directly or indirectly, to anyone other than
 *	You; and/or (b) to use Covered Code, alone or as part of a Larger Work, in
 *	any way to provide a service, including but not limited to delivery of
 *	content, through electronic communication	with a client other than You.
 *
 *	1.5 "Larger Work" means a work which combines Covered Code or portions
 *	thereof with code not governed by the terms of this License.
 *
 *	1.6 "Modifications" mean any addition to, deletion from, and/or change to,
 *	the substance and/or structure of the Original Code, any previous
 *	Modifications,	the combination of Original Code and any previous
 *	Modifications, and/or any	respective portions thereof.  When code is
 *	released as a series of files, a Modification is: (a) any addition to or
 *	deletion from the contents of a file containing Covered Code; and/or (b) any
 *	new file or other representation of computer program statements that contains
 *	any part of Covered Code.
 *
 *	1.7 "Original Code" means (a) the Source Code of a program or other	work as
 *	originally made available by Virtual Reality under this License,	including
 *	the Source Code of any updates or upgrades to such programs	or works made
 *	available by Virtual Reality under this License, and that has 	been expressly
 *	identified by Virtual Reality as such in the header file(s) of	such work; and
 *	(b) the object code compiled from such Source Code and originally made
 *	available by Virtual Reality under this License.
 *
 *	1.8 "Source Code" means the human readable form of a program or other work
 *	that is suitable for making modifications to it, including all	modules it
 *	contains, plus any associated interface definition files, scripts used to
 *	control compilation and installation of an executable	(object code).
 *
 *	1.9 "You" or "Your" means an individual or a legal entity exercising	rights
 *	under this License.  For legal entities, "You" or "Your"	includes any entity
 *	which controls, is controlled by, or is under common control with, You, where
 *	"control" means (a) the power, direct	or indirect, to cause the direction or
 *	management of such entity,	whether by contract or otherwise, or (b) ownership
 *	of fifty percent (50%) or more of the outstanding shares or beneficial
 *	ownership of such entity.
 *
 *	2. Permitted Uses; Conditions & Restrictions.  Subject to the terms and
 *	conditions of this License, Virtual Reality hereby grants You, effective on
 *	the date You accept this License and download the Original Code, a
 *	world-wide, royalty-free, non-exclusive license, to the extent of	Virtual
 *	Reality's Applicable Patent Rights and copyrights covering the Original	Code,
 *	to do the following:
 *
 *	2.1 Unmodified Code.  You may use, reproduce, display, perform, internally
 *	distribute within Your organization, and Externally Deploy verbatim,
 *	unmodified copies of the Original Code, for commercial or non-commercial
 *	purposes, provided that in each instance:
 *
 *	(a) You must retain and reproduce in all copies of Original Code the
 *	copyright and other proprietary notices and disclaimers of Virtual Reality as
 *	they appear in the Original Code, and keep intact all notices in the	Original
 *	Code that refer to this License; and
 *
 *	(b) You must include a copy of this License with every copy of Source Code of
 *	Covered Code and documentation You distribute or Externally	Deploy, and You
 *	may not offer or impose any terms on such Source Code	that alter or restrict
 *	this License or the recipients' rights	hereunder, except as permitted under
 *	Section 6.
 *
 *	2.2 Modified Code.  You may modify Covered Code and use, reproduce,	display,
 *	perform, internally distribute within Your organization, and Externally
 *	Deploy Your Modifications and Covered Code, for commercial or non-commercial
 *	purposes, provided that in each instance You also	meet all of these
 *	conditions:
 *
 *	(a) You must satisfy all the conditions of Section 2.1 with respect to	the
 *	Source Code of the Covered Code;
 *
 *	(b) You must duplicate, to the extent it does not already exist, the	notice
 *	in Exhibit A in each file of the Source Code of all Your	Modifications, and
 *	cause the modified files to carry prominent notices stating that You changed
 *	the files and the date of any change; and
 *
 *	(c) If You Externally Deploy Your Modifications, You must make Source Code of
 *	all Your Externally Deployed Modifications either available to	those to whom
 *	You have Externally Deployed Your Modifications, or	publicly available.
 *	Source Code of Your Externally Deployed Modifications must be released under
 *	the terms set forth in this License, including the license grants set forth
 *	in Section 3 below,for as long as you Externally Deploy the Covered Code or
 *	twelve (12)	months from the date of initial External Deployment, whichever is
 *	longer. You should preferably distribute the Source Code of Your	Externally
 *	Deployed Modifications electronically (e.g. download from a	web site).
 *
 *	2.3 Distribution of Executable Versions.  In addition, if You Externally
 *	Deploy Covered Code (Original Code and/or Modifications) in	object code,
 *	executable form only, You must include a prominent	notice, in the code itself
 *	as well as in related documentation, stating that Source Code of the Covered
 *	Code is available under the terms of this License with information on how and
 *	where to obtain such	Source Code.
 *
 *	2.4 Third Party Rights.  You expressly acknowledge and agree that	although
 *	Virtual Reality and each Contributor grants the licenses to their respective
 *	portions of the Covered Code set forth herein, no	assurances are provided by
 *	Virtual Reality or any Contributor that the Covered Code does not infringe
 *	the patent or other intellectual property	rights of any other entity. Virtual
 *	Reality and each Contributor disclaim any	liability to You for claims brought
 *	by any other entity based on	infringement of intellectual property rights or
 *	otherwise. As a	condition to exercising the rights and licenses granted
 *	hereunder, You	hereby assume sole responsibility to secure any other
 *	intellectual property rights needed, if any. For example, if a third party
 *	patent license is required to allow You to distribute the Covered Code, it is
 *	Your responsibility to acquire that license before distributing the Covered
 *	Code.
 *
 *	3. Your Grants.  In consideration of, and as a condition to, the	licenses
 *	granted to You under this License, You hereby grant to any	person or entity
 *	receiving or distributing Covered Code under this	License a non-exclusive,
 *	royalty-free, perpetual, irrevocable license, under Your Applicable Patent
 *	Rights and other intellectual property	rights (other than patent) owned or
 *	controlled by You, to use,	reproduce, display, perform, modify, sublicense,
 *	distribute and	Externally Deploy Your Modifications of the same scope and
 *	extent as Virtual Reality's licenses under Sections 2.1 and 2.2 above.
 *
 *	4. Larger Works.  You may create a Larger Work by combining Covered Code with
 *	other code not governed by the terms of this License and	distribute the
 *	Larger Work as a single product.  In each such instance, You must make sure
 *	the requirements of this License are fulfilled for the Covered Code or any
 *	portion thereof.
 *
 *	5. Limitations on Patent License.  Except as expressly stated in Section 2,
 *	no other patent rights, express or implied, are granted by	Virtual Reality
 *	herein.  Modifications and/or Larger Works may require additional patent
 *	licenses from Virtual Reality which Virtual Reality may grant in its sole
 *	discretion.
 *
 *	6. Additional Terms.  You may choose to offer, and to charge a fee	for,
 *	warranty, support, indemnity or liability obligations and/or other rights
 *	consistent with the scope of the license granted herein	("Additional Terms")
 *	to one or more recipients of Covered	Code. However, You may do so only on
 *	Your own behalf and as Your sole	responsibility, and not on behalf of Virtual
 *	Reality or any Contributor. You	must obtain the recipient's agreement that
 *	any such Additional Terms	are offered by You alone, and You hereby agree to
 *	indemnify, defend	and hold Virtual Reality and every Contributor harmless for
 *	any liability	incurred by or claims asserted against Virtual Reality or such
 *	Contributor by reason of any such Additional Terms.
 *
 *	7. Versions of the License.  Virtual Reality may publish revised and/or new
 *	versions of this License from time to time.  Each version will be	given a
 *	distinguishing version number.  Once Original Code has been	published under a
 *	particular version of this License, You may continue	to use it under the
 *	terms of that version. You may also choose to use such Original Code under
 *	the terms of any subsequent version of this License published by Virtual
 *	Reality.  No one other than Virtual Reality has the right to modify the terms
 *	applicable to Covered Code created under this License.
 *
 *	8. NO WARRANTY OR SUPPORT.  The Covered Code may contain in whole or	in part
 *	pre-release, untested, or not fully tested works.  The Covered	Code may
 *	contain errors that could cause failures or loss of data, and may be
 *	incomplete or contain inaccuracies.  You expressly acknowledge	and agree that
 *	use of the Covered Code, or any portion thereof, is at Your sole and entire
 *	risk.  THE COVERED CODE IS PROVIDED "AS IS" AND	WITHOUT WARRANTY, UPGRADES OR
 *	SUPPORT OF ANY KIND AND VIRTUAL REALITY AND VIRTUAL REALITY'S LICENSEE (S)
 *	(COLLECTIVELY REFERRED TO AS "VIRTUAL REALITY" FOR THE PURPOSES OF SECTIONS
 *	8 AND 9) AND ALL CONTRIBUTORS EXPRESSLY DISCLAIM ALL WARRANTIES AND/OR
 *	CONDITIONS, EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *	WARRANTIES AND OR CONDITIONS OF MERCHANTABILITY, OF SATISFACTORY QUALITY, OF
 *	FITNESS FOR A PARTICULAR PURPOSE, OF ACCURACY, OF QUIET ENJOYMENT, AND
 *	NONINFINGEMENT OF THIRD PARTY RIGHTS. VIRTUAL REALITY AND EACH CONTRIBUTOR
 *	DOES NOT WARRANT AGAINST INTERFERENCE WITH YOUR ENJOYMENT OF THE COVERED
 *	CODE, THAT THE	FUNCTIONS CONTAINED IN THE COVERED CODE WILL MEET YOUR
 *	REQUIREMENTS, THAT THE OPERATION OF THE COVERED CODE WILL BE UNINTERRUPTED OR
 *	ERROR-FREE, OR THAT DEFECTS IN THE COVERED CODE WILL BE CORRECTED. NO ORAL OR
 *	WRITTEN INFORMATION OR ADVICE GIVEN BY VIRTUAL REALITY, AN VIRTUAL REALITY
 *	AUTHORIZED REPRESENTATIVE OR ANY CONTRIBUTOR SHALL CREATE A WARRANTY. You
 *	acknowledge that the Covered Code is not intended for use in the operation of
 *	nuclear facilities, aircraft navigation, communication	systems, or air
 *	traffic control machines in which case the failure of	the Covered Code could
 *	lead to death, personal injury, or severe	physical or environmental damage.
 *
 *	9. LIMITATION OF LIABILITY. TO THE EXTENT NOT PROHIBITED BY LAW, IN NO EVENT
 *	SHALL VIRTUAL REALITY OR ANY CONTRIBUTOR BE LIABLE FOR ANY INCIDENTAL,
 *	SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES ARISING OUT OF OR RELATING TO THIS
 *	LICENSE OR YOUR USE OR INABILITY TO USE THE COVERED CODE, OR ANY PORTION
 *	THEREOF, WHETHER UNDER A THEORY OF CONTRACT, WARRANTY, TORT (INCLUDING
 *	NEGLIGENCE), PRODUCTS LIABILITY OR OTHERWISE, EVEN IF	VIRTUAL REALITY OR SUCH
 *	CONTRIBUTOR HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES AND
 *	NOTWITHSTANDING THE FAILURE OF ESSENTIAL PURPOSE OF ANY	REMEDY. SOME
 *	JURISDICTIONS DO NOT ALLOW THE LIMITATION OF LIABILITY OF	INCIDENTAL OR
 *	CONSEQUENTIAL DAMAGES, SO THIS LIMITATION MAY NOT APPLY TO YOU. In no event
 *	shall Virtual Reality's total liability to You for all damages (other than as
 *	may be required by applicable law) under this License exceed the amount of
 *	fifty dollars ($50.00).
 *
 *	10. Trademarks.  This License does not grant any rights to use the trademarks
 *	or trade names "Virtual Reality", "Virtual Reality Simulator", "Virtual
 *	Reality OS", "Virtual Server", "Virtual Simulator", "Virtual Reality
 *	Streaming Server" or any other trademarks, service marks, logos or trade
 *	names belonging to Virtual Reality (collectively "Virtual Reality Marks") or
 *	to any trademark, service mark, logo or trade name belonging to any
 *	Contributor.  You agree not to use any Virtual Reality Marks in or as part of
 *	the name of products derived from the Original Code or to endorse or promote
 *	products derived from the Original Code other than as	expressly permitted by
 *	and in strict compliance at all times with Virtual Reality's third party
 *	trademark usage guidelines which are posted at
 * 
 *	http://www.syndarveruleiki.is/page/guidelinesfor3rdparties
 *
 *	11. Ownership. Subject to the licenses granted under this License,each
 *	Contributor retains all rights, title and interest in and to any
 *	Modifications made by such Contributor.  Virtual Reality retains all rights,
 *	title and interest in and to the Original Code and any Modifications
 *	made by or on behalf of Virtual Reality ("Virtual Reality Modifications"),
 *	and such Virtual Reality Modifications will not be automatically subject to
 *	this License. Virtual Reality may, at its sole discretion, choose to license
 *	such Virtual Reality Modifications under this License, or on different terms
 *	from those contained in this License or may choose not to license them at all.
 *
 *	12.	Termination.
 *
 *	12.1 Termination.  This License and the rights granted hereunder will
 *	terminate:
 *
 *	(a) automatically without notice from Virtual Reality if You fail to comply
 *	with any term(s) of this License and fail to cure such breach within 30 days
 *	of becoming aware of such breach;
 *
 *	(b) immediately in the event of the circumstances described in Section 13.5
 *	(b); or
 *
 *	(c) automatically without notice from Virtual Reality if You, at any time
 *	during the term of this License, commence an action for patent infringement
 *	against Virtual Reality; provided that Virtual Reality did not first commence
 *	an action for patent infringement against You in that instance.
 *
 *	12.2 Effect of Termination.  Upon termination, You agree to	immediately stop
 *	any further use, reproduction, modification, sublicense and distribution of
 *	the Covered Code.  All sublicense to the Covered Code which have been
 *	properly granted prior to termination shall survive any termination of this
 *	License.  Provisions which, by their nature, should remain in effect beyond
 *	the termination of this	License shall survive, including but not limited to
 *	Sections 3, 5, 8, 9, 10, 11, 12.2 and 13.  No party will be liable to any
 *	other for compensation, indemnity or damages of any sort solely as a result
 *	of	terminating this License in accordance with its terms, and termination of
 *	this License will be without prejudice to any other right or remedy	of any
 *	party.
 *
 *	13. 	Miscellaneous.
 *
 *	13.1 Government End Users.  The Covered Code is a "commercial item" as
 *	defined in FAR 2.101.  Government software and technical data rights	in the
 *	Covered Code include only those rights customarily provided to	the public
 *	as defined in this License. This customary commercial	license in technical
 *	data and software is provided in accordance with FAR 12.211 (Technical Data)
 *	and 12.212 (Computer Software) and, for Department of Defense purchases, DFAR
 *	252.227-7015 (Technical Data -- Commercial Items) and 227.7202-3 (Rights in
 *	Commercial Computer Software or Computer Software Documentation).
 *	Accordingly, all U.S. Government End Users acquire Covered Code with only
 *	those rights set forth herein.
 *
 *	13.2 Relationship of Parties.  This License will not be construed as	creating
 *	an agency, partnership, joint venture or any other form of legal association
 *	between or among You, Virtual Reality or any Contributor, and You will not
 *	represent to the contrary, whether expressly, by implication, appearance or
 *	otherwise.
 *
 *	13.3 Independent Development.  Nothing in this License will impair Virtual
 *	Reality's right to acquire, license, develop, have others develop for it,
 *	market and/or distribute technology or products that perform the same or
 *	similar functions as, or otherwise compete with, Modifications, Larger Works,
 *	technology or products that You may develop, produce, market or distribute.
 *
 *	13.4 Waiver; Construction.  Failure by Virtual Reality or any Contributor to
 *	enforce any provision of this License will not be deemed a waiver of	future
 *	enforcement of that or any other provision.  Any law or regulation which
 *	provides that the language of a contract shall be	construed against the
 *	drafter will not apply to this License.
 *
 *	13.5 Severability.  (a) If for any reason a court of competent	jurisdiction
 *	finds any provision of this License, or portion thereof,to be unenforceable,
 *	that provision of the License will be enforced to the maximum extent
 *	permissible so as to effect the economic benefits and intent of the parties,
 *	and the remainder of this License will	continue in full force and effect.
 *	(b) Notwithstanding the foregoing, if applicable law prohibits or restricts
 *	You from fully and/or specifically complying with Sections 2 and/or 3 or
 *	prevents the enforceability of either of those Sections, this License will
 *	immediately terminate and You must immediately discontinue any use of the
 *	Covered Code and destroy all copies of it that are in your possession or
 *	control.
 *
 *	13.6 Dispute Resolution.  Any litigation or other dispute resolution	between
 *	You and Virtual Reality relating to this License shall take place in
 *	Reykjavik, Iceland, and You and Virtual Reality hereby consent to	the
 *	personal jurisdiction of, and venue in, the state and federal courts within
 *	that District with respect to this License. The	application of the United
 *	Nations Convention on Contracts for the International Sale of Goods is
 *	expressly excluded.
 *
 *	13.7 Entire Agreement; Governing Law.  This License constitutes the entire
 *	agreement between the parties with respect to the subject matter hereof.
 *	This License shall be governed by the laws of Iceland, except that body of
 *	Iceland law concerning conflicts of law.
 *
 *	Where You are located in the province of Quebec, Canada, the following
 *	clause applies: The parties hereby confirm that they have requested that this
 *	License and all related documents be drafted in English.
 *
 *	Les parties ont exigé que le présent contrat et tous les documents connexes
 *	soient rédigés en anglais.
 *
 *	EXHIBIT A.
 *
 *	"Portions Copyright (c) 2006-2013 Virtual Reality Enterprises. Hf.
 *	All Rights Reserved. Universal Wide
 *
 *	This file contains Original Code and/or Modifications of Original Code as
 *	defined in and that are subject to the Virtual Reality Public Source License
 *	Version 2.0 (the 'License').  You may not use this file except in	compliance
 *	with the License.  Please obtain a copy of the License at,
 * 
 *	http://www.syndarveruleiki.is/page/virtualrealityopensourcelicense 
 * 
 *  and read it before using this file.
 *
 *	The Original Code and all software distributed under the License are
 *	distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
 *	EXPRESS OR IMPLIED, AND VIRTUAL REALITY HEREBY DISCLAIMS ALL SUCH WARRANTIES,
 *	INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,FITNESS FOR A
 *	PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
 *
 *	Please see the License for the specific language governing rights and
 *	limitations under the License.
*
***************************************************************************/

(function(g){var q={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div>&#9658;</div>",buttonPrevHTML:"<div>&#9668;</div>",buttonNextEvent:"click",buttonPrevEvent:"click", buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},m=!1;g(window).bind("load.jcarousel",function(){m=!0});g.jcarousel=function(a,c){this.options=g.extend({},q,c||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;if(!c||c.rtl===void 0)this.options.rtl=(g(a).attr("dir")||g("html").attr("dir")||"").toLowerCase()=="rtl";this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical? this.options.rtl?"right":"left":"top";for(var b="",d=a.className.split(" "),f=0;f<d.length;f++)if(d[f].indexOf("jcarousel-skin")!=-1){g(a).removeClass(d[f]);b=d[f];break}a.nodeName.toUpperCase()=="UL"||a.nodeName.toUpperCase()=="OL"?(this.list=g(a),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=g(a),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));if(this.clip.size()===0)this.clip= this.list.wrap("<div></div>").parent();if(this.container.size()===0)this.container=this.clip.wrap("<div></div>").parent();b!==""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1&&this.container.wrap('<div class=" '+b+'"></div>');this.buttonPrev=g(".jcarousel-prev",this.container);if(this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null)this.buttonPrev=g(this.options.buttonPrevHTML).appendTo(this.container);this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext= g(".jcarousel-next",this.container);if(this.buttonNext.size()===0&&this.options.buttonNextHTML!==null)this.buttonNext=g(this.options.buttonNextHTML).appendTo(this.container);this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"}); !this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var j=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null,b=this.list.children("li"),e=this;if(b.size()>0){var h=0,i=this.options.offset;b.each(function(){e.format(this,i++);h+=e.dimension(this,j)});this.list.css(this.wh,h+100+"px");if(!c||c.size===void 0)this.options.size=b.size()}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display", "block");this.funcNext=function(){e.next()};this.funcPrev=function(){e.prev()};this.funcResize=function(){e.resizeTimer&&clearTimeout(e.resizeTimer);e.resizeTimer=setTimeout(function(){e.reload()},100)};this.options.initCallback!==null&&this.options.initCallback(this,"init");!m&&g.browser.safari?(this.buttons(!1,!1),g(window).bind("load.jcarousel",function(){e.setup()})):this.setup()};var f=g.jcarousel;f.fn=f.prototype={jcarousel:"0.2.8"};f.fn.extend=f.extend=g.extend;f.fn.extend({setup:function(){this.prevLast= this.prevFirst=this.last=this.first=null;this.animating=!1;this.tail=this.resizeTimer=this.timer=null;this.inTail=!1;if(!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var a=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(a,!1);g(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);this.options.setupCallback!==null&&this.options.setupCallback(this)}},reset:function(){this.list.empty();this.list.css(this.lt, "0px");this.list.css(this.wh,"10px");this.options.initCallback!==null&&this.options.initCallback(this,"reset");this.setup()},reload:function(){this.tail!==null&&this.inTail&&this.list.css(this.lt,f.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=!1;this.options.reloadCallback!==null&&this.options.reloadCallback(this);if(this.options.visible!==null){var a=this,c=Math.ceil(this.clipping()/this.options.visible),b=0,d=0;this.list.children("li").each(function(f){b+=a.dimension(this, c);f+1<a.first&&(d=b)});this.list.css(this.wh,b+"px");this.list.css(this.lt,-d+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(a){if(a!==void 0)this.options.size=a,this.locked||this.buttons();return this.options.size},has:function(a,c){if(c===void 0||!c)c=a;if(this.options.size!==null&&c>this.options.size)c=this.options.size;for(var b=a;b<=c;b++){var d=this.get(b);if(!d.length||d.hasClass("jcarousel-item-placeholder"))return!1}return!0}, get:function(a){return g(">.jcarousel-item-"+a,this.list)},add:function(a,c){var b=this.get(a),d=0,p=g(c);if(b.length===0)for(var j,e=f.intval(a),b=this.create(a);;){if(j=this.get(--e),e<=0||j.length){e<=0?this.list.prepend(b):j.after(b);break}}else d=this.dimension(b);p.get(0).nodeName.toUpperCase()=="LI"?(b.replaceWith(p),b=p):b.empty().append(c);this.format(b.removeClass(this.className("jcarousel-item-placeholder")),a);p=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible): null;d=this.dimension(b,p)-d;a>0&&a<this.first&&this.list.css(this.lt,f.intval(this.list.css(this.lt))-d+"px");this.list.css(this.wh,f.intval(this.list.css(this.wh))+d+"px");return b},remove:function(a){var c=this.get(a);if(c.length&&!(a>=this.first&&a<=this.last)){var b=this.dimension(c);a<this.first&&this.list.css(this.lt,f.intval(this.list.css(this.lt))+b+"px");c.remove();this.list.css(this.wh,f.intval(this.list.css(this.wh))-b+"px")}},next:function(){this.tail!==null&&!this.inTail?this.scrollTail(!1): this.scroll((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!==null&&this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){this.tail!==null&&this.inTail?this.scrollTail(!0):this.scroll((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!==null&&this.first==1?this.options.size:this.first-this.options.scroll)},scrollTail:function(a){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var c=f.intval(this.list.css(this.lt)), c=!a?c-this.tail:c+this.tail;this.inTail=!a;this.prevFirst=this.first;this.prevLast=this.last;this.animate(c)}},scroll:function(a,c){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(a),c))},pos:function(a,c){var b=f.intval(this.list.css(this.lt));if(this.locked||this.animating)return b;this.options.wrap!="circular"&&(a=a<1?1:this.options.size&&a>this.options.size?this.options.size:a);for(var d=this.first>a,g=this.options.wrap!="circular"&&this.first<=1?1:this.first,j=d?this.get(g): this.get(this.last),e=d?g:g-1,h=null,i=0,k=!1,l=0;d?--e>=a:++e<a;){h=this.get(e);k=!h.length;if(h.length===0&&(h=this.create(e).addClass(this.className("jcarousel-item-placeholder")),j[d?"before":"after"](h),this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(e<=0||e>this.options.size)))j=this.get(this.index(e)),j.length&&(h=this.add(e,j.clone(!0)));j=h;l=this.dimension(h);k&&(i+=l);if(this.first!==null&&(this.options.wrap=="circular"||e>=1&&(this.options.size===null||e<= this.options.size)))b=d?b+l:b-l}for(var g=this.clipping(),m=[],o=0,n=0,j=this.get(a-1),e=a;++o;){h=this.get(e);k=!h.length;if(h.length===0){h=this.create(e).addClass(this.className("jcarousel-item-placeholder"));if(j.length===0)this.list.prepend(h);else j[d?"before":"after"](h);if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(e<=0||e>this.options.size))j=this.get(this.index(e)),j.length&&(h=this.add(e,j.clone(!0)))}j=h;l=this.dimension(h);if(l===0)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting..."); this.options.wrap!="circular"&&this.options.size!==null&&e>this.options.size?m.push(h):k&&(i+=l);n+=l;if(n>=g)break;e++}for(h=0;h<m.length;h++)m[h].remove();i>0&&(this.list.css(this.wh,this.dimension(this.list)+i+"px"),d&&(b-=i,this.list.css(this.lt,f.intval(this.list.css(this.lt))-i+"px")));i=a+o-1;if(this.options.wrap!="circular"&&this.options.size&&i>this.options.size)i=this.options.size;if(e>i){o=0;e=i;for(n=0;++o;){h=this.get(e--);if(!h.length)break;n+=this.dimension(h);if(n>=g)break}}e=i-o+ 1;this.options.wrap!="circular"&&e<1&&(e=1);if(this.inTail&&d)b+=this.tail,this.inTail=!1;this.tail=null;if(this.options.wrap!="circular"&&i==this.options.size&&i-o+1>=1&&(d=f.intval(this.get(i).css(!this.options.vertical?"marginRight":"marginBottom")),n-d>g))this.tail=n-g-d;if(c&&a===this.options.size&&this.tail)b-=this.tail,this.inTail=!0;for(;a-- >e;)b+=this.dimension(this.get(a));this.prevFirst=this.first;this.prevLast=this.last;this.first=e;this.last=i;return b},animate:function(a,c){if(!this.locked&& !this.animating){this.animating=!0;var b=this,d=function(){b.animating=!1;a===0&&b.list.css(b.lt,0);!b.autoStopped&&(b.options.wrap=="circular"||b.options.wrap=="both"||b.options.wrap=="last"||b.options.size===null||b.last<b.options.size||b.last==b.options.size&&b.tail!==null&&!b.inTail)&&b.startAuto();b.buttons();b.notify("onAfterAnimation");if(b.options.wrap=="circular"&&b.options.size!==null)for(var c=b.prevFirst;c<=b.prevLast;c++)c!==null&&!(c>=b.first&&c<=b.last)&&(c<1||c>b.options.size)&&b.remove(c)}; this.notify("onBeforeAnimation");if(!this.options.animation||c===!1)this.list.css(this.lt,a+"px"),d();else{var f=!this.options.vertical?this.options.rtl?{right:a}:{left:a}:{top:a},d={duration:this.options.animation,easing:this.options.easing,complete:d};if(g.isFunction(this.options.animationStepCallback))d.step=this.options.animationStepCallback;this.list.animate(f,d)}}},startAuto:function(a){if(a!==void 0)this.options.auto=a;if(this.options.auto===0)return this.stopAuto();if(this.timer===null){this.autoStopped= !1;var c=this;this.timer=window.setTimeout(function(){c.next()},this.options.auto*1E3)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){if(this.timer!==null)window.clearTimeout(this.timer),this.timer=null},buttons:function(a,c){if(a==null&&(a=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="first"||this.options.size===null||this.last<this.options.size),!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!==null&& this.last>=this.options.size))a=this.tail!==null&&!this.inTail;if(c==null&&(c=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="last"||this.first>1),!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!==null&&this.first==1))c=this.tail!==null&&this.inTail;var b=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),a&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext), this.buttonNext[a?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",a?!1:!0),this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=a&&this.buttonNext.each(function(){b.options.buttonNextCallback(b,this,a)}).data("jcarouselstate",a)):this.options.buttonNextCallback!==null&&this.buttonNextState!=a&&this.options.buttonNextCallback(b,null,a);this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev), c&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[c?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",c?!1:!0),this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=c&&this.buttonPrev.each(function(){b.options.buttonPrevCallback(b,this,c)}).data("jcarouselstate",c)):this.options.buttonPrevCallback!==null&&this.buttonPrevState!=c&&this.options.buttonPrevCallback(b,null,c);this.buttonNextState= a;this.buttonPrevState=c},notify:function(a){var c=this.prevFirst===null?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",a,c);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",a,c,this.first),this.callback("itemFirstOutCallback",a,c,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",a,c,this.last),this.callback("itemLastOutCallback",a,c,this.prevLast));this.callback("itemVisibleInCallback",a,c,this.first,this.last,this.prevFirst, this.prevLast);this.callback("itemVisibleOutCallback",a,c,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(a,c,b,d,f,j,e){if(!(this.options[a]==null||typeof this.options[a]!="object"&&c!="onAfterAnimation")){var h=typeof this.options[a]=="object"?this.options[a][c]:this.options[a];if(g.isFunction(h)){var i=this;if(d===void 0)h(i,b,c);else if(f===void 0)this.get(d).each(function(){h(i,this,d,b,c)});else for(var a=function(a){i.get(a).each(function(){h(i,this,a,b,c)})},k=d;k<=f;k++)k!== null&&!(k>=j&&k<=e)&&a(k)}}},create:function(a){return this.format("<li></li>",a)},format:function(a,c){for(var a=g(a),b=a.get(0).className.split(" "),d=0;d<b.length;d++)b[d].indexOf("jcarousel-")!=-1&&a.removeClass(b[d]);a.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+c)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",c);return a},className:function(a){return a+" "+a+(!this.options.vertical?"-horizontal":"-vertical")}, dimension:function(a,c){var b=g(a);if(c==null)return!this.options.vertical?b.outerWidth(!0)||f.intval(this.options.itemFallbackDimension):b.outerHeight(!0)||f.intval(this.options.itemFallbackDimension);else{var d=!this.options.vertical?c-f.intval(b.css("marginLeft"))-f.intval(b.css("marginRight")):c-f.intval(b.css("marginTop"))-f.intval(b.css("marginBottom"));g(b).css(this.wh,d+"px");return this.dimension(b)}},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-f.intval(this.clip.css("borderLeftWidth"))- f.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-f.intval(this.clip.css("borderTopWidth"))-f.intval(this.clip.css("borderBottomWidth"))},index:function(a,c){if(c==null)c=this.options.size;return Math.round(((a-1)/c-Math.floor((a-1)/c))*c)+1}});f.extend({defaults:function(a){return g.extend(q,a||{})},intval:function(a){a=parseInt(a,10);return isNaN(a)?0:a},windowLoaded:function(){m=!0}});g.fn.jcarousel=function(a){if(typeof a=="string"){var c=g(this).data("jcarousel"),b=Array.prototype.slice.call(arguments, 1);return c[a].apply(c,b)}else return this.each(function(){var b=g(this).data("jcarousel");b?(a&&g.extend(b.options,a),b.reload()):g(this).data("jcarousel",new f(this,a))})}})(jQuery);
